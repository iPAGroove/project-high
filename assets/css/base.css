:root {
  --bg: #0b0f14;
  --bg-elev: #121722;
  --card: #141a24;
  --border: #1e2633;
  --text: #ffffff;
  --muted: #9aa7bd;
  --accent: #00b3ff; /* переопределяется темами */
  --radius: 14px;
  --gap: 12px;
}

/* базовая типографика под iOS */
html, body {
  height: 100%;
  background: var(--bg);
  color: var(--text);
  font: 16px/1.4 -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}
* { box-sizing: border-box; }
a { color: var(--accent); text-decoration: none; }
img { display: block; }

/* верхняя панель */
.topbar {
  position: sticky; top: 0; z-index: 20;
  padding: calc(env(safe-area-inset-top) + 12px) 12px 12px 12px;
  background: color-mix(in oklab, var(--bg) 85%, #000 15%);
  backdrop-filter: saturate(120%) blur(10px);
  -webkit-backdrop-filter: saturate(120%) blur(10px);
  border-bottom: 1px solid var(--border);
}
.brand {
  font-weight: 800; letter-spacing: .4px; color: var(--accent); margin-bottom: 10px;
}

/* iOS segmented control */
.segmented {
  display: grid;
  grid-auto-flow: column;
  gap: 6px;
  background: var(--bg-elev);
  padding: 6px;
  border-radius: 14px;
  border: 1px solid var(--border);
  margin-bottom: 10px;
}
.segmented > button {
  appearance: none; border: 0; border-radius: 10px;
  background: transparent; color: var(--text);
  padding: 8px 10px; font-weight: 600;
  -webkit-tap-highlight-color: transparent;
}
.segmented > button.active { background: var(--card); }

/* поиск + кнопка темы */
.search-wrap {
  display: grid; grid-template-columns: 1fr auto; gap: 8px;
}
#search {
  width: 100%;
  appearance: none;
  padding: 12px 14px;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  color: var(--text);
  outline: none;
}
#search::placeholder { color: #99a3b8; }
#theme-toggle {
  border: 1px solid var(--border);
  background: var(--card);
  color: var(--text);
  padding: 0 14px; border-radius: 12px;
}

/* сетка каталога */
.catalog {
  padding: 12px 12px calc(env(safe-area-inset-bottom) + 72px) 12px;
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--gap);
  max-width: 640px;
  margin: 0 auto;
}

/* карточки */
.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 12px;
  display: grid; gap: 10px;
  box-shadow: 0 6px 20px rgb(0 0 0 / .25);
}
.row { display: grid; grid-template-columns: 56px 1fr; gap: 12px; align-items: center; }
.icon { width: 56px; height: 56px; border-radius: 12px; border: 1px solid var(--border); object-fit: cover; }
h3 { margin: 0 0 2px; font-size: 16px; }
.meta { font-size: 12px; color: var(--muted); }
.tags { display: flex; flex-wrap: wrap; gap: 6px; }
.tag { font-size: 11px; padding: 4px 8px; border-radius: 999px; border: 1px solid var(--border); background: var(--bg-elev); }
.btns { display: flex; flex-wrap: wrap; gap: 8px; }
.btn {
  display: inline-flex; align-items: center; justify-content: center;
  gap: 8px; padding: 10px 12px; border-radius: 12px;
  background: var(--accent); color: #001018; font-weight: 700;
  border: 0; cursor: pointer; -webkit-tap-highlight-color: transparent;
}
.btn.secondary {
  background: transparent; color: var(--text);
  border: 1px solid var(--border);
}

/* футер с учётом safe-area */
.safe-footer {
  padding: 16px calc(env(safe-area-inset-right) + 16px) calc(env(safe-area-inset-bottom) + 20px) calc(env(safe-area-inset-left) + 16px);
  text-align: center; color: var(--muted);
  border-top: 1px solid var(--border);
  background: var(--bg);
}

/* адаптив под iPhone Plus/Max (шире одна колонка не нужна) */
@media (min-width: 520px) {
  .catalog { grid-template-columns: repeat(2, 1fr); }
}
