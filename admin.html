<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>URSA IPA Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no" />
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
</head>
<body>

  <div id="login-screen" class="auth-screen">
    <div class="brand"><span>URSA IPA Admin</span></div>
    <p style="color: var(--muted); margin: 16px 0;">–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</p>
    <button id="login-btn" class="btn blue">–í–æ–π—Ç–∏ —Å Google</button>
  </div>

  <div id="denied-screen" class="auth-screen" style="display:none;">
    <div class="brand"><span>URSA IPA Admin</span></div>
    <h2>–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω</h2>
    <p>–í–∞—à–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –Ω–µ—Ç –≤ —Å–ø–∏—Å–∫–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.</p>
    <br>
    <button id="logout-btn-denied" class="btn red">–í—ã–π—Ç–∏</button>
  </div>

  <div id="admin-wrapper" style="display:none;">
    
    <header class="topbar">
      <div class="wrap">
        <div class="header-main">
          <div class="brand"><span>URSA IPA Admin</span></div>
          <button id="logout-btn-admin" class="btn small red">–í—ã–π—Ç–∏</button>
        </div>
        <nav class="admin-nav">
          <button id="tab-ipas" class="tab active">üì¶ IPA</button>
          <button id="tab-users" class="tab">üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
        </nav>
      </div>
    </header>

    <main class="wrap">
      <section id="ipa-section">
        <div class="admin-actions">
          <button id="add-btn" class="btn blue">+ –î–æ–±–∞–≤–∏—Ç—å IPA</button>
          <input id="search" type="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, bundleId, —Ç–µ–≥–∞–º‚Ä¶" />
        </div>
        <div id="cards" class="cards"></div>
      </section>

      <section id="users-section" style="display:none;">
        <div class="admin-actions">
          <input id="user-search" type="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ email, –∏–º–µ–Ω–∏‚Ä¶" />
        </div>
        <table class="user-table">
          <thead>
            <tr><th>Email</th><th>–ò–º—è</th><th>UID</th><th>–°—Ç–∞—Ç—É—Å</th><th>–î–µ–π—Å—Ç–≤–∏–µ</th></tr>
          </thead>
          <tbody id="user-list"></tbody>
        </table>
      </section>
    </main>

    <div id="modal" class="modal" aria-hidden="true">
      <div class="backdrop" data-close></div>
      <div class="modal-card">
        <header class="modal-head">
          <strong id="modal-title">–î–æ–±–∞–≤–∏—Ç—å IPA</strong>
          <button class="close" data-close>‚úï</button>
        </header>
        <form id="ipa-form" class="modal-body">
          <fieldset>
            <legend>–û—Å–Ω–æ–≤–Ω–æ–µ</legend>
            <div class="field-grid">
              <label>Name <input type="text" name="name" required></label>
              <label>Bundle ID <input type="text" name="bundleId" required></label>
              <label>Version <input type="text" name="version" required></label>
              <label>Minimal iOS <input type="text" name="minIOS"></label>
              <label>Size (MB) <input type="number" name="sizeBytes"></label>
            </div>
          </fieldset>
          <fieldset>
            <legend>–ú–µ–¥–∏–∞</legend>
            <label>Icon URL
              <input type="url" name="iconUrl" id="iconUrl">
              <img id="icon-preview" class="icon-preview" style="display:none;">
            </label>
            <label>Download URL <input type="url" name="downloadUrl"></label>
          </fieldset>
          <fieldset>
            <legend>–§—É–Ω–∫—Ü–∏–∏ –º–æ–¥–∞ / Hack Features</legend>
            <label>Features (RU) <textarea name="features_ru" placeholder="—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é"></textarea></label>
            <label>Features (EN) <textarea name="features_en" placeholder="comma separated"></textarea></label>
          </fieldset>
          <fieldset>
            <legend>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</legend>
            <div class="tag-buttons">
              <button type="button" class="tag-btn" data-tag="games">Games</button>
              <button type="button" class="tag-btn" data-tag="apps">Apps</button>
            </div>
            <input type="hidden" name="tag" />
          </fieldset>
          <fieldset>
            <legend>VIP –¥–æ—Å—Ç—É–ø</legend>
            <label style="display:flex; align-items:center; gap:8px;">
              <input type="checkbox" name="vipOnly" id="vipOnly">
              <span>–î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è VIP</span>
            </label>
          </fieldset>
          <div class="modal-actions">
            <button type="submit" class="btn blue">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          </div>
        </form>
      </div>
    </div>

    <div id="user-modal" class="modal" aria-hidden="true">
      <div class="backdrop" data-close></div>
      <div class="modal-card small">
        <header class="modal-head">
          <strong>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</strong>
          <button class="close" data-close>‚úï</button>
        </header>
        <div class="modal-body">
          <p><b>Email:</b> <span id="edit-user-email"></span></p>
          <p><b>–ò–º—è:</b> <span id="edit-user-name"></span></p>
          <label>–°—Ç–∞—Ç—É—Å:
            <select id="edit-user-status">
              <option value="free">Free</option>
              <option value="vip">VIP</option>
            </select>
          </label>
          
          <div class="modal-actions" style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 10px;">
            <button id="save-user-status" class="btn blue">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <button type="button" id="save-user-vip-31" class="btn" style="background: var(--vip); color: #000;">‚≠ê VIP –Ω–∞ 31 –¥–µ–Ω—å</button>
          </div>
        </div>
      </div>
    </div>

  </div> 
  <script type="module" src="admin.js?v=8.0"></script>
</body>
</html>
