<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>URSA IPA Admin (Secure)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no" />
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
</head>
<body>
  <header class="topbar">
    <div class="wrap">
      <div class="brand"><span>URSA IPA Admin</span></div>
      <nav class="admin-nav">
        <button id="tab-ipas" class="tab active">üì¶ IPA</button>
        <button id="tab-users" class="tab">üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
      </nav>
      <div class="auth-status">
        <button id="login-btn" class="btn blue">üîë –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google</button>
        <span id="admin-email" style="display:none;"></span>
        <button id="logout-btn" class="btn red" style="display:none;">üö™ –í—ã–π—Ç–∏</button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <!-- IPA Section -->
    <section id="ipa-section">
      <div class="admin-actions">
        <button id="add-btn" class="btn blue">+ –î–æ–±–∞–≤–∏—Ç—å IPA</button>
        <input id="search" type="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, bundleId, —Ç–µ–≥–∞–º‚Ä¶" />
      </div>
      <div id="cards" class="cards"></div>
    </section>

    <!-- USERS Section -->
    <section id="users-section" style="display:none;">
      <div class="admin-actions">
        <input id="user-search" type="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ email, –∏–º–µ–Ω–∏‚Ä¶" />
      </div>
      <table class="user-table">
        <thead>
          <tr><th>Email</th><th>–ò–º—è</th><th>UID</th><th>–°—Ç–∞—Ç—É—Å</th><th>–î–µ–π—Å—Ç–≤–∏–µ</th></tr>
        </thead>
        <tbody id="user-list"></tbody>
      </table>
    </section>
  </main>

  <!-- IPA Modal -->
  <div id="modal" class="modal" aria-hidden="true">
    <div class="backdrop" data-close></div>
    <div class="modal-card">
      <header class="modal-head">
        <strong id="modal-title">–î–æ–±–∞–≤–∏—Ç—å IPA</strong>
        <button class="close" data-close>‚úï</button>
      </header>

      <form id="ipa-form" class="modal-body">
        <fieldset>
          <legend>–û—Å–Ω–æ–≤–Ω–æ–µ</legend>
          <div class="field-grid">
            <label>Name <input type="text" name="name" required></label>
            <label>Bundle ID <input type="text" name="bundleId" required></label>
            <label>Version <input type="text" name="version" required></label>
            <label>Minimal iOS <input type="text" name="minIOS"></label>
            <label>Size (MB) <input type="number" name="sizeBytes"></label>
          </div>
        </fieldset>

        <fieldset>
          <legend>–ú–µ–¥–∏–∞</legend>
          <label>Icon URL
            <input type="url" name="iconUrl" id="iconUrl">
            <img id="icon-preview" class="icon-preview" style="display:none;">
          </label>
          <label>Download URL <input type="url" name="downloadUrl"></label>
        </fieldset>

        <fieldset>
          <legend>–§—É–Ω–∫—Ü–∏–∏ –º–æ–¥–∞ / Hack Features</legend>
          <label>Features (RU) <textarea name="features_ru" placeholder="—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é"></textarea></label>
          <label>Features (EN) <textarea name="features_en" placeholder="comma separated"></textarea></label>
        </fieldset>

        <fieldset>
          <legend>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</legend>
          <div class="tag-buttons">
            <button type="button" class="tag-btn" data-tag="games">Games</button>
            <button type="button" class="tag-btn" data-tag="apps">Apps</button>
          </div>
          <input type="hidden" name="tag" />
        </fieldset>

        <div class="modal-actions">
          <button type="submit" class="btn blue">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
      </form>
    </div>
  </div>

  <!-- User Edit Modal -->
  <div id="user-modal" class="modal" aria-hidden="true">
    <div class="backdrop" data-close></div>
    <div class="modal-card small">
      <header class="modal-head">
        <strong>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</strong>
        <button class="close" data-close>‚úï</button>
      </header>
      <div class="modal-body">
        <p><b>Email:</b> <span id="edit-user-email"></span></p>
        <p><b>–ò–º—è:</b> <span id="edit-user-name"></span></p>
        <label>–°—Ç–∞—Ç—É—Å:
          <select id="edit-user-status">
            <option value="free">Free</option>
            <option value="vip">VIP</option>
          </select>
        </label>
        <div class="modal-actions">
          <button id="save-user-status" class="btn blue">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="admin.js?v=8.0"></script>
</body>
</html>
